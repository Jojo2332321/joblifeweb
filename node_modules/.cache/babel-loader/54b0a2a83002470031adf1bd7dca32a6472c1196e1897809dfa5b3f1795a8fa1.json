{"ast":null,"code":"import _slicedToArray from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{Modal,Button,Form}from\"react-bootstrap\";import{createShift,fetchCompanys,fetchCompanyType,fetchPositions,fetchWorker,fetchWorkHourTemplates}from\"../http/ShiftsAPI\";import{Context}from\"../index\";import Select from'react-select';import{format}from'date-fns';import data from\"bootstrap/js/src/dom/data\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateShifts=function CreateShifts(_ref){var show=_ref.show,onHide=_ref.onHide,date=_ref.date,userid=_ref.userid;var _useContext=useContext(Context),shifts=_useContext.shifts;var _useContext2=useContext(Context),user=_useContext2.user;var isoString=date.toISOString();useEffect(function(){fetchPositions().then(function(data){return shifts.setPositions(data);});fetchWorker().then(function(data){return shifts.setWorker(data);});fetchWorkHourTemplates().then(function(data){return shifts.setWorkHourTemplates(data);});fetchCompanys().then(function(data){return shifts.setCompanys(data);});},[]);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectedEmployee=_useState2[0],setSelectedEmployee=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedPosition=_useState4[0],setSelectedPosition=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedShift=_useState6[0],setSelectedShift=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectedCompany=_useState8[0],setSelectedCompany=_useState8[1];var addShift=function addShift(){var formData=new FormData();/*TODO*/formData.append(\"workerId\",selectedEmployee.value);formData.append(\"positionId\",selectedPosition);formData.append(\"workHourTemplateId\",selectedShift);formData.append(\"startDate\",isoString);formData.append(\"companyId\",selectedCompany);formData.append(\"userid\",localStorage.getItem('userId'));createShift(formData).then(function(data){setSelectedEmployee(\"\");setSelectedPosition(\"\");setSelectedShift(\"\");setSelectedCompany(\"\");onHide();});};var handleSubmit=function handleSubmit(e){e.preventDefault();/*        console.log(`Employee: ${selectedEmployee}, Position: ${selectedPosition}, Shift: ${selectedShift}`);*/};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add Shift\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Select,{value:selectedEmployee,onChange:function onChange(selectedOption){return setSelectedEmployee(selectedOption);},options:shifts.worker.map(function(item){return{value:item.id,label:\"\".concat(item.firstname,\" \").concat(item.surname)};})}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Position:\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedPosition,onChange:function onChange(e){return setSelectedPosition(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Position\"}),shifts.positions.map(function(position){return/*#__PURE__*/_jsxs(\"option\",{value:position.id,children:[\" \",position.name]},position.id);})]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Company:\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedCompany,onChange:function onChange(e){return setSelectedCompany(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Company\"}),shifts.companys.map(function(companys){return/*#__PURE__*/_jsxs(\"option\",{value:companys.id,children:[\" \",companys.name]},companys.id);})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"shift\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Shift:\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedShift,onChange:function onChange(e){return setSelectedShift(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Shift\"}),shifts._workHourTemplates.map(function(workHourTemplate){return/*#__PURE__*/_jsxs(\"option\",{value:workHourTemplate.id,children:[\" \",workHourTemplate.name]},workHourTemplate.id);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-2\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:addShift,children:\"Add\"})})]})})]});};export default CreateShifts;","map":{"version":3,"names":["React","useContext","useEffect","useState","Modal","Button","Form","createShift","fetchCompanys","fetchCompanyType","fetchPositions","fetchWorker","fetchWorkHourTemplates","Context","Select","format","data","jsx","_jsx","jsxs","_jsxs","CreateShifts","_ref","show","onHide","date","userid","_useContext","shifts","_useContext2","user","isoString","toISOString","then","setPositions","setWorker","setWorkHourTemplates","setCompanys","_useState","_useState2","_slicedToArray","selectedEmployee","setSelectedEmployee","_useState3","_useState4","selectedPosition","setSelectedPosition","_useState5","_useState6","selectedShift","setSelectedShift","_useState7","_useState8","selectedCompany","setSelectedCompany","addShift","formData","FormData","append","value","localStorage","getItem","handleSubmit","e","preventDefault","centered","children","Header","closeButton","Title","Body","onSubmit","onChange","selectedOption","options","worker","map","item","id","label","concat","firstname","surname","Group","Label","target","positions","position","name","companys","controlId","_workHourTemplates","workHourTemplate","className","variant","onClick"],"sources":["C:/Users/melya/WebstormProjects/joblifeweb/client/src/modals/CreateShifts.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\r\nimport { Modal, Button, Form } from \"react-bootstrap\";\r\nimport {\r\n    createShift,\r\n    fetchCompanys,\r\n    fetchCompanyType,\r\n    fetchPositions,\r\n    fetchWorker,\r\n    fetchWorkHourTemplates\r\n} from \"../http/ShiftsAPI\";\r\nimport {Context} from \"../index\";\r\nimport Select from 'react-select';\r\nimport {format} from 'date-fns';\r\nimport data from \"bootstrap/js/src/dom/data\";\r\n\r\n\r\nconst CreateShifts = ({show, onHide, date, userid}) => {\r\n    const {shifts}=useContext(Context)\r\n    const {user}=useContext(Context)\r\n    const  isoString = date.toISOString();\r\n    useEffect(()=>{\r\n        fetchPositions().then(data =>shifts.setPositions(data));\r\n        fetchWorker().then(data =>shifts.setWorker(data))\r\n        fetchWorkHourTemplates().then(data =>shifts.setWorkHourTemplates(data))\r\n        fetchCompanys().then(data => shifts.setCompanys(data))\r\n    },[])\r\n\r\n    const [selectedEmployee, setSelectedEmployee] = useState(\"\");\r\n    const [selectedPosition, setSelectedPosition] = useState(\"\");\r\n    const [selectedShift, setSelectedShift] = useState(\"\");\r\n    const [selectedCompany, setSelectedCompany] = useState(\"\");\r\n    const addShift = () =>{\r\n        const formData = new FormData()\r\n        /*TODO*/\r\n        formData.append(\"workerId\", selectedEmployee.value);\r\n        formData.append(\"positionId\", selectedPosition);\r\n        formData.append(\"workHourTemplateId\", selectedShift);\r\n        formData.append(\"startDate\", isoString);\r\n        formData.append(\"companyId\", selectedCompany)\r\n        formData.append(\"userid\", localStorage.getItem('userId'))\r\n\r\n        createShift(formData).then(data => {\r\n            setSelectedEmployee(\"\");\r\n            setSelectedPosition(\"\");\r\n            setSelectedShift(\"\");\r\n            setSelectedCompany(\"\");\r\n            onHide();\r\n        })\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n/*        console.log(`Employee: ${selectedEmployee}, Position: ${selectedPosition}, Shift: ${selectedShift}`);*/\r\n    };\r\n\r\n    return (\r\n        <Modal show={show} onHide={onHide} centered>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Add Shift</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n\r\n                <Form onSubmit={handleSubmit}>\r\n\r\n                    <Select\r\n                        value={selectedEmployee}\r\n                        onChange={(selectedOption) => setSelectedEmployee(selectedOption)}\r\n                        options={shifts.worker.map(item =>({value:item.id, label:`${item.firstname} ${item.surname}`}))} />\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Position:</Form.Label>\r\n                        <Form.Select\r\n                            value={selectedPosition}\r\n                            onChange={(e) => setSelectedPosition(e.target.value)}\r\n                        >\r\n                            <option value=\"\">Select Position</option>\r\n                            {shifts.positions.map(position=>\r\n                            <option key={position.id} value={position.id}> {position.name}</option> )}\r\n\r\n                        </Form.Select>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Company:</Form.Label>\r\n                        <Form.Select\r\n                            value={selectedCompany}\r\n                            onChange={(e) => setSelectedCompany(e.target.value)}\r\n                        >\r\n                            <option value=\"\">Select Company</option>\r\n                            {shifts.companys.map(companys=>\r\n                                <option key={companys.id} value={companys.id}> {companys.name}</option> )}\r\n\r\n                        </Form.Select>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"shift\">\r\n                        <Form.Label>Shift:</Form.Label>\r\n                        <Form.Select\r\n                            value={selectedShift}\r\n                            onChange={(e) => setSelectedShift(e.target.value)}\r\n                        >\r\n                            <option value=\"\">Select Shift</option>\r\n                            {shifts._workHourTemplates.map(workHourTemplate=>\r\n                                <option key={workHourTemplate.id} value={workHourTemplate.id}> {workHourTemplate.name}</option> )}\r\n                        </Form.Select>\r\n\r\n                    </Form.Group>\r\n\r\n                    <div className=\"d-flex justify-content-end mt-2\">\r\n                    <Button variant=\"primary\" onClick={addShift}>\r\n                        Add\r\n                    </Button>\r\n                    </div>\r\n                </Form>\r\n            </Modal.Body>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default CreateShifts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}