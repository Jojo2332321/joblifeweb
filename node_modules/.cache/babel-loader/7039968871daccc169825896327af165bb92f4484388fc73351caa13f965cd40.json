{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{observer}from\"mobx-react-lite\";import React,{useContext,useEffect}from\"react\";import{Context}from\"../index\";import{Button,Table}from\"react-bootstrap\";import{fetchCompanyType,fetchWorker,deleteWorker}from\"../http/ShiftsAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WorkersList=observer(function(){var _useContext=useContext(Context),shifts=_useContext.shifts;useEffect(function(){fetchWorker().then(function(data){return shifts.setWorker(data);});},[]);var Delete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var updatedWorkers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return deleteWorker(id);case 3:updatedWorkers=shifts.worker.filter(function(worker){return worker.id!==id;});shifts.setWorker(updatedWorkers);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error deleting worker:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function Delete(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Table,{className:\"mt-2\",striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"firstname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"surname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"citizenship\"}),/*#__PURE__*/_jsx(\"th\",{children:\"number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"work_permit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"work_status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:shifts.worker.map(function(worker){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:worker.firstname}),/*#__PURE__*/_jsx(\"td\",{children:worker.surname}),/*#__PURE__*/_jsx(\"td\",{children:worker.age}),/*#__PURE__*/_jsx(\"td\",{children:worker.citizenship}),/*#__PURE__*/_jsx(\"td\",{children:worker.number}),/*#__PURE__*/_jsx(\"td\",{children:worker.work_permit}),/*#__PURE__*/_jsx(\"td\",{children:worker.work_status}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center\",children:[\" \",/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:function onClick(){return Delete(worker.id);},children:\"Delete\"})]})]},worker.id);})})]});});export default WorkersList;","map":{"version":3,"names":["observer","React","useContext","useEffect","Context","Button","Table","fetchCompanyType","fetchWorker","deleteWorker","jsx","_jsx","jsxs","_jsxs","WorkersList","_useContext","shifts","then","data","setWorker","Delete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","updatedWorkers","wrap","_callee$","_context","prev","next","worker","filter","t0","console","error","stop","_x","apply","arguments","className","striped","bordered","hover","children","map","firstname","surname","age","citizenship","number","work_permit","work_status","variant","onClick"],"sources":["C:/Users/melya/WebstormProjects/joblifeweb/client/src/components/WorkersList.js"],"sourcesContent":["import {observer} from \"mobx-react-lite\";\r\nimport React, {useContext, useEffect} from \"react\";\r\nimport {Context} from \"../index\";\r\nimport {Button, Table} from \"react-bootstrap\";\r\nimport {fetchCompanyType, fetchWorker,deleteWorker} from \"../http/ShiftsAPI\";\r\n\r\nconst WorkersList = observer(() => {\r\n    const {shifts}=useContext(Context)\r\n\r\n    useEffect(()=>{\r\n        fetchWorker().then(data =>shifts.setWorker(data))\r\n    },[])\r\n\r\n    const Delete = async (id) => {\r\n        try {\r\n            await deleteWorker(id);\r\n            const updatedWorkers = shifts.worker.filter(worker => worker.id !== id);\r\n            shifts.setWorker(updatedWorkers);\r\n        } catch (error) {\r\n            console.error('Error deleting worker:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Table className=\"mt-2\" striped bordered hover >\r\n            <thead>\r\n            <tr>\r\n                <th>firstname</th>\r\n                <th>surname</th>\r\n                <th>age</th>\r\n                <th>citizenship</th>\r\n                <th>number</th>\r\n                <th>work_permit</th>\r\n                <th>work_status</th>\r\n\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            {shifts.worker.map(worker =>\r\n                <tr key={worker.id}>\r\n                    <td>{worker.firstname}</td>\r\n                    <td>{worker.surname}</td>\r\n                    <td>{worker.age}</td>\r\n                    <td>{worker.citizenship}</td>\r\n                    <td>{worker.number}</td>\r\n                    <td>{worker.work_permit}</td>\r\n                    <td>{worker.work_status}</td>\r\n                    <td className=\"text-center\"> <Button variant=\"outline-danger\" onClick={() => Delete(worker.id)}>Delete</Button>\r\n                    </td>\r\n                </tr>\r\n            )}\r\n            </tbody>\r\n        </Table>\r\n    );\r\n});\r\n\r\nexport default WorkersList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}