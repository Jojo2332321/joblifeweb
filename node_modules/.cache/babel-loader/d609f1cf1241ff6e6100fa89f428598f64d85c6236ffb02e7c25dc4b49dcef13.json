{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Button,Card,Container,Form}from\"react-bootstrap\";import{Navigate,NavLink,useLocation,useNavigate}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHIFTS_ROUTE}from\"../utils/consts\";import{login,registration}from\"../http/userAPI\";import{Context}from\"../index\";import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=observer(function(){var _useContext=useContext(Context),user=_useContext.user;var location=useLocation();var navigate=useNavigate();var isLogin=location.pathname===LOGIN_ROUTE;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLogin){_context.next=7;break;}_context.next=4;return login(email,password);case 4:data=_context.sent;_context.next=10;break;case 7:_context.next=9;return registration(email,password);case 9:data=_context.sent;case 10:user.setUser(data);user.setIsAuth(true);navigate(SHIFTS_ROUTE);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.message);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{height:window.innerHeight-30},children:/*#__PURE__*/_jsxs(Card,{style:{width:600},className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-auto\",children:isLogin?\"Authorization\":\"Registration\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mt-2\",placeholder:\"Enter your Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{className:\"mt-2\",placeholder:\"Enter your Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\"})]}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex justify-content-between mt-3\",children:[isLogin?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:REGISTRATION_ROUTE,children:\"Registration\"})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:LOGIN_ROUTE,children:\"Authorization\"})}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:click,className:\"mt-2 align-self-end\",children:isLogin?\"Enter\":\"Registration\"})]})]})});});export default Auth;","map":{"version":3,"names":["React","useContext","useState","Button","Card","Container","Form","Navigate","NavLink","useLocation","useNavigate","LOGIN_ROUTE","REGISTRATION_ROUTE","SHIFTS_ROUTE","login","registration","Context","observer","jsx","_jsx","jsxs","_jsxs","Auth","_useContext","user","location","navigate","isLogin","pathname","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","click","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","setUser","setIsAuth","t0","alert","response","message","stop","apply","arguments","className","style","height","window","innerHeight","children","width","Control","placeholder","value","onChange","e","target","type","to","variant","onClick"],"sources":["C:/Users/melya/WebstormProjects/joblifeweb/client/src/pages/Auth.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Button, Card, Container, Form} from \"react-bootstrap\";\r\nimport {Navigate, NavLink, useLocation, useNavigate,} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, SHIFTS_ROUTE} from \"../utils/consts\";\r\nimport {login, registration} from \"../http/userAPI\";\r\n\r\nimport {Context} from \"../index\";\r\nimport {observer} from \"mobx-react-lite\";\r\n\r\nconst Auth = observer(() => {\r\n    const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const navigate = useNavigate()\r\n    const isLogin = location.pathname ===LOGIN_ROUTE\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const click = async ()=> {\r\n    try {\r\n        let data;\r\n        if (isLogin){\r\n            data = await login(email, password)\r\n        }else {\r\n            data = await registration(email,password)\r\n        }\r\n\r\n        user.setUser(data)\r\n        user.setIsAuth(true)\r\n        navigate(SHIFTS_ROUTE)\r\n    }catch (e){\r\n        alert(e.response.data.message)\r\n    }\r\n    }\r\n\r\n\r\n    return (\r\n        <Container\r\n         className=\"d-flex justify-content-center align-items-center\"\r\n         style={{height: window.innerHeight -30}}\r\n        >\r\n            <Card style={{width:600}} className=\"p-5\">\r\n                <h2 className=\"m-auto\">{isLogin ? \"Authorization\" : \"Registration\"}</h2>\r\n                <Form className=\"d-flex flex-column\">\r\n\r\n                    <Form.Control\r\n                        className=\"mt-2\"\r\n                        placeholder=\"Enter your Email\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.target.value)}\r\n                    />\r\n                    <Form.Control\r\n                        className=\"mt-2\"\r\n                        placeholder=\"Enter your Password\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.target.value)}\r\n                        type=\"password\"\r\n                    />\r\n                </Form>\r\n\r\n                <Form className=\"d-flex justify-content-between mt-3\">\r\n\r\n                    {isLogin ?\r\n                        <div>\r\n                            <NavLink to={REGISTRATION_ROUTE}>Registration</NavLink>\r\n                        </div>\r\n                        :\r\n                        <div>\r\n                            <NavLink to={LOGIN_ROUTE}>Authorization</NavLink>\r\n                        </div>\r\n                    }\r\n                    <Button\r\n                        variant={\"outline-success\"}\r\n                        onClick={click}\r\n                        className=\"mt-2 align-self-end\">\r\n                        {isLogin ? \"Enter\" : \"Registration\"}\r\n                    </Button>\r\n                </Form>\r\n            </Card>\r\n        </Container>\r\n    );\r\n});\r\n\r\nexport default Auth;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}