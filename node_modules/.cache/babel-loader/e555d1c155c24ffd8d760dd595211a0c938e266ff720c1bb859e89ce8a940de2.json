{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/melya/WebstormProjects/joblifeweb/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{observer}from\"mobx-react-lite\";import React,{useContext,useEffect,useState}from\"react\";import{Context}from\"../index\";import{Button,Table}from\"react-bootstrap\";import{fetchCompanyType,fetchWorker,deleteWorker,fetchWorkPermit,fetchWorkStatus}from\"../http/ShiftsAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WorkersList=observer(function(){var _useContext=useContext(Context),shifts=_useContext.shifts;useEffect(function(){fetchWorker().then(function(data){return shifts.setWorker(data);});fetchWorkPermit().then(function(data){return shifts.setWorkerPermir(data);});fetchWorkStatus().then(function(data){return shifts.setWorkerStatus(data);});},[]);var Delete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var updatedWorkers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return deleteWorker(id);case 3:updatedWorkers=shifts.worker.filter(function(worker){return worker.id!==id;});shifts.setWorker(updatedWorkers);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error deleting worker:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function Delete(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Table,{className:\"mt-2\",striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"firstname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"surname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"citizenship\"}),/*#__PURE__*/_jsx(\"th\",{children:\"number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"work_permit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"work_status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:shifts.worker.map(function(worker){var workPermit=shifts.workerPermit.find(function(permit){return permit.id===worker.workPermitId;});var workStatus=shifts.workerStatus.find(function(status){return status.id===worker.workStatusId;});return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:worker.firstname}),/*#__PURE__*/_jsx(\"td\",{children:worker.surname}),/*#__PURE__*/_jsx(\"td\",{children:worker.age}),/*#__PURE__*/_jsx(\"td\",{children:worker.citizenship}),/*#__PURE__*/_jsx(\"td\",{children:worker.number}),/*#__PURE__*/_jsx(\"td\",{children:workPermit?workPermit.name:\"N/A\"}),/*#__PURE__*/_jsx(\"td\",{children:workStatus?workStatus.name:\"N/A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:function onClick(){return Delete(worker.id);},children:\"Delete\"})})]},worker.id);})})]});});export default WorkersList;","map":{"version":3,"names":["observer","React","useContext","useEffect","useState","Context","Button","Table","fetchCompanyType","fetchWorker","deleteWorker","fetchWorkPermit","fetchWorkStatus","jsx","_jsx","jsxs","_jsxs","WorkersList","_useContext","shifts","then","data","setWorker","setWorkerPermir","setWorkerStatus","Delete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","updatedWorkers","wrap","_callee$","_context","prev","next","worker","filter","t0","console","error","stop","_x","apply","arguments","className","striped","bordered","hover","children","map","workPermit","workerPermit","find","permit","workPermitId","workStatus","workerStatus","status","workStatusId","firstname","surname","age","citizenship","number","name","variant","onClick"],"sources":["C:/Users/melya/WebstormProjects/joblifeweb/client/src/components/WorkersList.js"],"sourcesContent":["import {observer} from \"mobx-react-lite\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {Context} from \"../index\";\r\nimport {Button, Table} from \"react-bootstrap\";\r\nimport {fetchCompanyType, fetchWorker, deleteWorker, fetchWorkPermit, fetchWorkStatus} from \"../http/ShiftsAPI\";\r\n\r\nconst WorkersList = observer(() => {\r\n    const {shifts}=useContext(Context)\r\n\r\n    useEffect(()=>{\r\n        fetchWorker().then(data =>shifts.setWorker(data))\r\n        fetchWorkPermit().then(data =>shifts.setWorkerPermir(data))\r\n        fetchWorkStatus().then(data =>shifts.setWorkerStatus(data))\r\n    },[])\r\n\r\n    const Delete = async (id) => {\r\n        try {\r\n            await deleteWorker(id);\r\n            const updatedWorkers = shifts.worker.filter(worker => worker.id !== id);\r\n            shifts.setWorker(updatedWorkers);\r\n        } catch (error) {\r\n            console.error('Error deleting worker:', error);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <Table className=\"mt-2\" striped bordered hover >\r\n            <thead>\r\n            <tr>\r\n                <th>firstname</th>\r\n                <th>surname</th>\r\n                <th>age</th>\r\n                <th>citizenship</th>\r\n                <th>number</th>\r\n                <th>work_permit</th>\r\n                <th>work_status</th>\r\n\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            {shifts.worker.map((worker) => {\r\n                const workPermit = shifts.workerPermit.find((permit) => permit.id === worker.workPermitId);\r\n                const workStatus = shifts.workerStatus.find((status) => status.id === worker.workStatusId);\r\n\r\n                return (\r\n                    <tr key={worker.id}>\r\n                        <td>{worker.firstname}</td>\r\n                        <td>{worker.surname}</td>\r\n                        <td>{worker.age}</td>\r\n                        <td>{worker.citizenship}</td>\r\n                        <td>{worker.number}</td>\r\n                        <td>{workPermit ? workPermit.name : \"N/A\"}</td>\r\n                        <td>{workStatus ? workStatus.name : \"N/A\"}</td>\r\n                        <td className=\"text-center\">\r\n                            <Button variant=\"outline-danger\" onClick={() => Delete(worker.id)}>\r\n                                Delete\r\n                            </Button>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            })}\r\n            </tbody>\r\n        </Table>\r\n    );\r\n});\r\n\r\nexport default WorkersList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}